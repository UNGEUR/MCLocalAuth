# MCLocalAuth v1.2.0

**Type:** Mise Ã  jour majeure  
**Date:** 21 Octobre 2025

---

## âœ¨ Nouvelles fonctionnalitÃ©s

### ğŸ” Commande /mctest

Une nouvelle commande Discord pour tester la connexion entre le bot et le plugin.

**Utilisation:** `/mctest`

**Affiche:**
- Statut de connexion (CONNECTÃ‰/DÃ‰CONNECTÃ‰)
- Version du serveur Minecraft
- Version du plugin
- Nombre de joueurs en ligne
- Nombre d'authentifications en attente
- Statut du bot Discord

---

### âœ… Commande /auth simplifiÃ©e

**AVANT:**
```
/auth <pseudo> <code>
```

**MAINTENANT:**
```
/auth <code>
```

Le pseudo n'est plus nÃ©cessaire ! Le bot recherche automatiquement le joueur correspondant au code parmi tous les joueurs en attente d'authentification.

**Avantages:**
- Plus simple Ã  utiliser
- Moins d'erreurs de frappe
- Authentification plus rapide

---

## ğŸ”§ Corrections majeures

### ğŸ” Correction: "Joueur introuvable"

**PROBLÃˆME RÃ‰SOLU:** Le bot ne trouvait pas les joueurs car il cherchait uniquement parmi les joueurs authentifiÃ©s.

**SOLUTION:** Le bot cherche maintenant dans la liste des codes en attente (PendingManager) au lieu de chercher directement le joueur connectÃ©.

**RÃ©sultat:** Le bot trouve maintenant correctement tous les joueurs qui tentent de se connecter.

---

### ğŸŒ Recherche Ã©tendue du code

Le systÃ¨me parcourt automatiquement TOUS les joueurs en ligne ayant un code en attente pour trouver la correspondance, au lieu de se limiter Ã  un seul joueur.

---

## ğŸ”§ DÃ©tails techniques

**Fichiers modifiÃ©s:**
- `DiscordBot.java` â†’ Ajout de /mctest aux commandes enregistrÃ©es
- `DiscordCommandListener.java` â†’ Nouvelle mÃ©thode handleMcTest() + handleAuth() rÃ©Ã©crite
- `pom.xml` & `plugin.yml` â†’ Version 1.2.0

**Algorithme de recherche (handleAuth):**
1. Validation du format du code (4-8 chiffres)
2. VÃ©rification de l'appartenance au serveur Discord
3. Parcours de tous les joueurs en ligne
4. Pour chaque joueur: vÃ©rifier code en attente
5. Si match trouvÃ©: consommer code + enregistrer IP + confirmer

---

## ğŸ“¦ CompatibilitÃ©

âœ… **Minecraft:** 1.8 â†’ 1.21+  
âœ… **Java:** 8+  
âœ… **Serveur:** Spigot, Paper, Purpur  
âœ… **Config:** Aucun changement requis

---

## ğŸ“‹ Comparatif

### Version 1.1.0 (PrÃ©cÃ©dente)
- âŒ /auth nÃ©cessitait pseudo + code
- âŒ Erreur "Joueur introuvable"
- âŒ Pas de commande de test
- âŒ Recherche limitÃ©e Ã  un joueur

### Version 1.2.0 (Actuelle)
- âœ… /auth ne nÃ©cessite que le code
- âœ… Trouve tous les joueurs en attente
- âœ… Commande /mctest disponible
- âœ… Recherche dans tous les codes en attente
- âœ… Messages d'erreur plus clairs

---

## ğŸš€ Utilisation

**Pour l'utilisateur Discord:**
1. Se connecter au serveur Minecraft
2. Noter le code affichÃ© Ã  l'Ã©cran
3. Utiliser `/auth <code>` sur Discord
4. Attendre la confirmation
5. Jouer !

**Pour tester la connexion:**
- Utiliser `/mctest` sur Discord
- VÃ©rifier que le statut est "CONNECTÃ‰"

---

## âš™ï¸ Installation

1. ArrÃªter le serveur Minecraft
2. Remplacer `MCLocalAuth-Spigot-v1.1.0.jar` par `MCLocalAuth-Spigot-v1.2.0.jar`
3. RedÃ©marrer le serveur
4. Tester avec `/mctest` sur Discord

**Note:** La configuration (config.yml) reste identique, aucun changement requis.

---

**Taille:** 10.68 MB  
**Build:** Maven + Java 8  
**Statut:** STABLE âœ…
